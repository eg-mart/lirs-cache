# lirs-cache
C++ реализация LIRS кэша

## Использование
Проект включает в себя две программы: `lirs` (для тестового запуска LIRS кэша) и `ideal` (для тестового запуска "идеального" кэша).
- **Формат ввода:**
```
<размер кэша (целое число)>
<количество тестовых запросов (целое число)>
<запрос 1 (целое число)>
<запрос 2>
...
```
- **Формат вывода:**
```
<количество хитов (целое число)>
```

## Сборка
**Зависимости:**
```
- python3 (для тестирования)
```
Чтобы собрать проект, запустите в папке проекта
```
cmake -S . -B build
cmake --build build
```
После этого в папке build будут доступны два исполняемых файла - `lirs` и `ideal`.
Для тестирования проекта с использованием тестов из папки `tests` запустите
```
cmake --build build --target test
или
cd build ; ctest
```
Доступны следующие дополнительные опции компиляции:
1. `WITH_DEBUG_OUTPUT` - включить дополнительный вывод в stdout (дамп кэша при каждом запросе). Влияет на обе цели (`lirs` и `ideal`)
2. `WITH_SET_HIRS_SIZE` - для цели `lirs`. С этой опцией вместо одного размера кэша `lirs` принимает на вход два: общий размер кэша и размер списка HIR блоков.
Для их использования при сборке воспользуйтесь следующей командой:
```
cmake -D<название опции> -S . -B build
```

## Сравнение производительности
Для запуска сравнения количества хитов "идеального" и LIRS кэшей вопользуйтесь скриптом `benchmark.py`, зависимости которого указаны в `pyproject.toml`. Для установки зависимостей и запуска скрипта используйте (требуется установленный `uv`):
```
uv run benchmark.py
```
Скрипт сгенерирует файл `benchmark.png` с графиком зависимости разницы хитов кэшей (`ideal - lirs`) от их размеров.
